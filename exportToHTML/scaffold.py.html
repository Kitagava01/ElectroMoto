<html>
<head>
<title>scaffold.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #7a7e85;}
.s4 { color: #6aab73;}
.s5 { color: #5f826b; font-style: italic;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
scaffold.py</font>
</center></td></tr></table>
<pre><span class="s0">from </span><span class="s1">__future__ </span><span class="s0">import </span><span class="s1">annotations</span>

<span class="s0">import </span><span class="s1">importlib</span><span class="s2">.</span><span class="s1">util</span>
<span class="s0">import </span><span class="s1">os</span>
<span class="s0">import </span><span class="s1">pathlib</span>
<span class="s0">import </span><span class="s1">sys</span>
<span class="s0">import </span><span class="s1">typing </span><span class="s0">as </span><span class="s1">t</span>
<span class="s0">from </span><span class="s1">collections </span><span class="s0">import </span><span class="s1">defaultdict</span>
<span class="s0">from </span><span class="s1">functools </span><span class="s0">import </span><span class="s1">update_wrapper</span>

<span class="s0">from </span><span class="s1">jinja2 </span><span class="s0">import </span><span class="s1">BaseLoader</span>
<span class="s0">from </span><span class="s1">jinja2 </span><span class="s0">import </span><span class="s1">FileSystemLoader</span>
<span class="s0">from </span><span class="s1">werkzeug</span><span class="s2">.</span><span class="s1">exceptions </span><span class="s0">import </span><span class="s1">default_exceptions</span>
<span class="s0">from </span><span class="s1">werkzeug</span><span class="s2">.</span><span class="s1">exceptions </span><span class="s0">import </span><span class="s1">HTTPException</span>
<span class="s0">from </span><span class="s1">werkzeug</span><span class="s2">.</span><span class="s1">utils </span><span class="s0">import </span><span class="s1">cached_property</span>

<span class="s0">from </span><span class="s2">.. </span><span class="s0">import </span><span class="s1">typing </span><span class="s0">as </span><span class="s1">ft</span>
<span class="s0">from </span><span class="s2">..</span><span class="s1">helpers </span><span class="s0">import </span><span class="s1">get_root_path</span>
<span class="s0">from </span><span class="s2">..</span><span class="s1">templating </span><span class="s0">import </span><span class="s1">_default_template_ctx_processor</span>

<span class="s0">if </span><span class="s1">t</span><span class="s2">.</span><span class="s1">TYPE_CHECKING</span><span class="s2">:  </span><span class="s3"># pragma: no cover</span>
    <span class="s0">from </span><span class="s1">click </span><span class="s0">import </span><span class="s1">Group</span>

<span class="s3"># a singleton sentinel value for parameter defaults</span>
<span class="s1">_sentinel </span><span class="s2">= </span><span class="s1">object</span><span class="s2">()</span>

<span class="s1">F </span><span class="s2">= </span><span class="s1">t</span><span class="s2">.</span><span class="s1">TypeVar</span><span class="s2">(</span><span class="s4">&quot;F&quot;</span><span class="s2">, </span><span class="s1">bound</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">Callable</span><span class="s2">[..., </span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">])</span>
<span class="s1">T_after_request </span><span class="s2">= </span><span class="s1">t</span><span class="s2">.</span><span class="s1">TypeVar</span><span class="s2">(</span><span class="s4">&quot;T_after_request&quot;</span><span class="s2">, </span><span class="s1">bound</span><span class="s2">=</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">AfterRequestCallable</span><span class="s2">[</span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">])</span>
<span class="s1">T_before_request </span><span class="s2">= </span><span class="s1">t</span><span class="s2">.</span><span class="s1">TypeVar</span><span class="s2">(</span><span class="s4">&quot;T_before_request&quot;</span><span class="s2">, </span><span class="s1">bound</span><span class="s2">=</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">BeforeRequestCallable</span><span class="s2">)</span>
<span class="s1">T_error_handler </span><span class="s2">= </span><span class="s1">t</span><span class="s2">.</span><span class="s1">TypeVar</span><span class="s2">(</span><span class="s4">&quot;T_error_handler&quot;</span><span class="s2">, </span><span class="s1">bound</span><span class="s2">=</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">ErrorHandlerCallable</span><span class="s2">)</span>
<span class="s1">T_teardown </span><span class="s2">= </span><span class="s1">t</span><span class="s2">.</span><span class="s1">TypeVar</span><span class="s2">(</span><span class="s4">&quot;T_teardown&quot;</span><span class="s2">, </span><span class="s1">bound</span><span class="s2">=</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">TeardownCallable</span><span class="s2">)</span>
<span class="s1">T_template_context_processor </span><span class="s2">= </span><span class="s1">t</span><span class="s2">.</span><span class="s1">TypeVar</span><span class="s2">(</span>
    <span class="s4">&quot;T_template_context_processor&quot;</span><span class="s2">, </span><span class="s1">bound</span><span class="s2">=</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">TemplateContextProcessorCallable</span>
<span class="s2">)</span>
<span class="s1">T_url_defaults </span><span class="s2">= </span><span class="s1">t</span><span class="s2">.</span><span class="s1">TypeVar</span><span class="s2">(</span><span class="s4">&quot;T_url_defaults&quot;</span><span class="s2">, </span><span class="s1">bound</span><span class="s2">=</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">URLDefaultCallable</span><span class="s2">)</span>
<span class="s1">T_url_value_preprocessor </span><span class="s2">= </span><span class="s1">t</span><span class="s2">.</span><span class="s1">TypeVar</span><span class="s2">(</span>
    <span class="s4">&quot;T_url_value_preprocessor&quot;</span><span class="s2">, </span><span class="s1">bound</span><span class="s2">=</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">URLValuePreprocessorCallable</span>
<span class="s2">)</span>
<span class="s1">T_route </span><span class="s2">= </span><span class="s1">t</span><span class="s2">.</span><span class="s1">TypeVar</span><span class="s2">(</span><span class="s4">&quot;T_route&quot;</span><span class="s2">, </span><span class="s1">bound</span><span class="s2">=</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">RouteCallable</span><span class="s2">)</span>


<span class="s0">def </span><span class="s1">setupmethod</span><span class="s2">(</span><span class="s1">f</span><span class="s2">: </span><span class="s1">F</span><span class="s2">) </span><span class="s1">-&gt; F</span><span class="s2">:</span>
    <span class="s1">f_name </span><span class="s2">= </span><span class="s1">f</span><span class="s2">.</span><span class="s1">__name__</span>

    <span class="s0">def </span><span class="s1">wrapper_func</span><span class="s2">(</span><span class="s1">self</span><span class="s2">: </span><span class="s1">Scaffold</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">: </span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">: </span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">) </span><span class="s1">-&gt; t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">:</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_check_setup_finished</span><span class="s2">(</span><span class="s1">f_name</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">f</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">)</span>

    <span class="s0">return </span><span class="s1">t</span><span class="s2">.</span><span class="s1">cast</span><span class="s2">(</span><span class="s1">F</span><span class="s2">, </span><span class="s1">update_wrapper</span><span class="s2">(</span><span class="s1">wrapper_func</span><span class="s2">, </span><span class="s1">f</span><span class="s2">))</span>


<span class="s0">class </span><span class="s1">Scaffold</span><span class="s2">:</span>
    <span class="s5">&quot;&quot;&quot;Common behavior shared between :class:`~flask.Flask` and 
    :class:`~flask.blueprints.Blueprint`. 
 
    :param import_name: The import name of the module where this object 
        is defined. Usually :attr:`__name__` should be used. 
    :param static_folder: Path to a folder of static files to serve. 
        If this is set, a static route will be added. 
    :param static_url_path: URL prefix for the static route. 
    :param template_folder: Path to a folder containing template files. 
        for rendering. If this is set, a Jinja loader will be added. 
    :param root_path: The path that static, template, and resource files 
        are relative to. Typically not set, it is discovered based on 
        the ``import_name``. 
 
    .. versionadded:: 2.0 
    &quot;&quot;&quot;</span>

    <span class="s1">cli</span><span class="s2">: </span><span class="s1">Group</span>
    <span class="s1">name</span><span class="s2">: </span><span class="s1">str</span>
    <span class="s1">_static_folder</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span>
    <span class="s1">_static_url_path</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span>

    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">import_name</span><span class="s2">: </span><span class="s1">str</span><span class="s2">,</span>
        <span class="s1">static_folder</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s1">os</span><span class="s2">.</span><span class="s1">PathLike</span><span class="s2">[</span><span class="s1">str</span><span class="s2">] | </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">static_url_path</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">template_folder</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s1">os</span><span class="s2">.</span><span class="s1">PathLike</span><span class="s2">[</span><span class="s1">str</span><span class="s2">] | </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">root_path</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
    <span class="s2">):</span>
        <span class="s3">#: The name of the package or module that this object belongs</span>
        <span class="s3">#: to. Do not change this once it is set by the constructor.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">import_name </span><span class="s2">= </span><span class="s1">import_name</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">static_folder </span><span class="s2">= </span><span class="s1">static_folder  </span><span class="s3"># type: ignore</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">static_url_path </span><span class="s2">= </span><span class="s1">static_url_path</span>

        <span class="s3">#: The path to the templates folder, relative to</span>
        <span class="s3">#: :attr:`root_path`, to add to the template loader. ``None`` if</span>
        <span class="s3">#: templates should not be added.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">template_folder </span><span class="s2">= </span><span class="s1">template_folder</span>

        <span class="s0">if </span><span class="s1">root_path </span><span class="s0">is None</span><span class="s2">:</span>
            <span class="s1">root_path </span><span class="s2">= </span><span class="s1">get_root_path</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">import_name</span><span class="s2">)</span>

        <span class="s3">#: Absolute path to the package on the filesystem. Used to look</span>
        <span class="s3">#: up resources contained in the package.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">root_path </span><span class="s2">= </span><span class="s1">root_path</span>

        <span class="s3">#: A dictionary mapping endpoint names to view functions.</span>
        <span class="s3">#:</span>
        <span class="s3">#: To register a view function, use the :meth:`route` decorator.</span>
        <span class="s3">#:</span>
        <span class="s3">#: This data structure is internal. It should not be modified</span>
        <span class="s3">#: directly and its format may change at any time.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">view_functions</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s1">ft</span><span class="s2">.</span><span class="s1">RouteCallable</span><span class="s2">] = {}</span>

        <span class="s3">#: A data structure of registered error handlers, in the format</span>
        <span class="s3">#: ``{scope: {code: {class: handler}}}``. The ``scope`` key is</span>
        <span class="s3">#: the name of a blueprint the handlers are active for, or</span>
        <span class="s3">#: ``None`` for all requests. The ``code`` key is the HTTP</span>
        <span class="s3">#: status code for ``HTTPException``, or ``None`` for</span>
        <span class="s3">#: other exceptions. The innermost dictionary maps exception</span>
        <span class="s3">#: classes to handler functions.</span>
        <span class="s3">#:</span>
        <span class="s3">#: To register an error handler, use the :meth:`errorhandler`</span>
        <span class="s3">#: decorator.</span>
        <span class="s3">#:</span>
        <span class="s3">#: This data structure is internal. It should not be modified</span>
        <span class="s3">#: directly and its format may change at any time.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">error_handler_spec</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span>
            <span class="s1">ft</span><span class="s2">.</span><span class="s1">AppOrBlueprintKey</span><span class="s2">,</span>
            <span class="s1">dict</span><span class="s2">[</span><span class="s1">int </span><span class="s2">| </span><span class="s0">None</span><span class="s2">, </span><span class="s1">dict</span><span class="s2">[</span><span class="s1">type</span><span class="s2">[</span><span class="s1">Exception</span><span class="s2">], </span><span class="s1">ft</span><span class="s2">.</span><span class="s1">ErrorHandlerCallable</span><span class="s2">]],</span>
        <span class="s2">] = </span><span class="s1">defaultdict</span><span class="s2">(</span><span class="s0">lambda</span><span class="s2">: </span><span class="s1">defaultdict</span><span class="s2">(</span><span class="s1">dict</span><span class="s2">))</span>

        <span class="s3">#: A data structure of functions to call at the beginning of</span>
        <span class="s3">#: each request, in the format ``{scope: [functions]}``. The</span>
        <span class="s3">#: ``scope`` key is the name of a blueprint the functions are</span>
        <span class="s3">#: active for, or ``None`` for all requests.</span>
        <span class="s3">#:</span>
        <span class="s3">#: To register a function, use the :meth:`before_request`</span>
        <span class="s3">#: decorator.</span>
        <span class="s3">#:</span>
        <span class="s3">#: This data structure is internal. It should not be modified</span>
        <span class="s3">#: directly and its format may change at any time.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">before_request_funcs</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span>
            <span class="s1">ft</span><span class="s2">.</span><span class="s1">AppOrBlueprintKey</span><span class="s2">, </span><span class="s1">list</span><span class="s2">[</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">BeforeRequestCallable</span><span class="s2">]</span>
        <span class="s2">] = </span><span class="s1">defaultdict</span><span class="s2">(</span><span class="s1">list</span><span class="s2">)</span>

        <span class="s3">#: A data structure of functions to call at the end of each</span>
        <span class="s3">#: request, in the format ``{scope: [functions]}``. The</span>
        <span class="s3">#: ``scope`` key is the name of a blueprint the functions are</span>
        <span class="s3">#: active for, or ``None`` for all requests.</span>
        <span class="s3">#:</span>
        <span class="s3">#: To register a function, use the :meth:`after_request`</span>
        <span class="s3">#: decorator.</span>
        <span class="s3">#:</span>
        <span class="s3">#: This data structure is internal. It should not be modified</span>
        <span class="s3">#: directly and its format may change at any time.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">after_request_funcs</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span>
            <span class="s1">ft</span><span class="s2">.</span><span class="s1">AppOrBlueprintKey</span><span class="s2">, </span><span class="s1">list</span><span class="s2">[</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">AfterRequestCallable</span><span class="s2">[</span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">]]</span>
        <span class="s2">] = </span><span class="s1">defaultdict</span><span class="s2">(</span><span class="s1">list</span><span class="s2">)</span>

        <span class="s3">#: A data structure of functions to call at the end of each</span>
        <span class="s3">#: request even if an exception is raised, in the format</span>
        <span class="s3">#: ``{scope: [functions]}``. The ``scope`` key is the name of a</span>
        <span class="s3">#: blueprint the functions are active for, or ``None`` for all</span>
        <span class="s3">#: requests.</span>
        <span class="s3">#:</span>
        <span class="s3">#: To register a function, use the :meth:`teardown_request`</span>
        <span class="s3">#: decorator.</span>
        <span class="s3">#:</span>
        <span class="s3">#: This data structure is internal. It should not be modified</span>
        <span class="s3">#: directly and its format may change at any time.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">teardown_request_funcs</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span>
            <span class="s1">ft</span><span class="s2">.</span><span class="s1">AppOrBlueprintKey</span><span class="s2">, </span><span class="s1">list</span><span class="s2">[</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">TeardownCallable</span><span class="s2">]</span>
        <span class="s2">] = </span><span class="s1">defaultdict</span><span class="s2">(</span><span class="s1">list</span><span class="s2">)</span>

        <span class="s3">#: A data structure of functions to call to pass extra context</span>
        <span class="s3">#: values when rendering templates, in the format</span>
        <span class="s3">#: ``{scope: [functions]}``. The ``scope`` key is the name of a</span>
        <span class="s3">#: blueprint the functions are active for, or ``None`` for all</span>
        <span class="s3">#: requests.</span>
        <span class="s3">#:</span>
        <span class="s3">#: To register a function, use the :meth:`context_processor`</span>
        <span class="s3">#: decorator.</span>
        <span class="s3">#:</span>
        <span class="s3">#: This data structure is internal. It should not be modified</span>
        <span class="s3">#: directly and its format may change at any time.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">template_context_processors</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span>
            <span class="s1">ft</span><span class="s2">.</span><span class="s1">AppOrBlueprintKey</span><span class="s2">, </span><span class="s1">list</span><span class="s2">[</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">TemplateContextProcessorCallable</span><span class="s2">]</span>
        <span class="s2">] = </span><span class="s1">defaultdict</span><span class="s2">(</span><span class="s1">list</span><span class="s2">, {</span><span class="s0">None</span><span class="s2">: [</span><span class="s1">_default_template_ctx_processor</span><span class="s2">]})</span>

        <span class="s3">#: A data structure of functions to call to modify the keyword</span>
        <span class="s3">#: arguments passed to the view function, in the format</span>
        <span class="s3">#: ``{scope: [functions]}``. The ``scope`` key is the name of a</span>
        <span class="s3">#: blueprint the functions are active for, or ``None`` for all</span>
        <span class="s3">#: requests.</span>
        <span class="s3">#:</span>
        <span class="s3">#: To register a function, use the</span>
        <span class="s3">#: :meth:`url_value_preprocessor` decorator.</span>
        <span class="s3">#:</span>
        <span class="s3">#: This data structure is internal. It should not be modified</span>
        <span class="s3">#: directly and its format may change at any time.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">url_value_preprocessors</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span>
            <span class="s1">ft</span><span class="s2">.</span><span class="s1">AppOrBlueprintKey</span><span class="s2">,</span>
            <span class="s1">list</span><span class="s2">[</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">URLValuePreprocessorCallable</span><span class="s2">],</span>
        <span class="s2">] = </span><span class="s1">defaultdict</span><span class="s2">(</span><span class="s1">list</span><span class="s2">)</span>

        <span class="s3">#: A data structure of functions to call to modify the keyword</span>
        <span class="s3">#: arguments when generating URLs, in the format</span>
        <span class="s3">#: ``{scope: [functions]}``. The ``scope`` key is the name of a</span>
        <span class="s3">#: blueprint the functions are active for, or ``None`` for all</span>
        <span class="s3">#: requests.</span>
        <span class="s3">#:</span>
        <span class="s3">#: To register a function, use the :meth:`url_defaults`</span>
        <span class="s3">#: decorator.</span>
        <span class="s3">#:</span>
        <span class="s3">#: This data structure is internal. It should not be modified</span>
        <span class="s3">#: directly and its format may change at any time.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">url_default_functions</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span>
            <span class="s1">ft</span><span class="s2">.</span><span class="s1">AppOrBlueprintKey</span><span class="s2">, </span><span class="s1">list</span><span class="s2">[</span><span class="s1">ft</span><span class="s2">.</span><span class="s1">URLDefaultCallable</span><span class="s2">]</span>
        <span class="s2">] = </span><span class="s1">defaultdict</span><span class="s2">(</span><span class="s1">list</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">__repr__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">:</span>
        <span class="s0">return </span><span class="s4">f&quot;&lt;</span><span class="s0">{</span><span class="s1">type</span><span class="s2">(</span><span class="s1">self</span><span class="s2">).</span><span class="s1">__name__</span><span class="s0">} {</span><span class="s1">self</span><span class="s2">.</span><span class="s1">name</span><span class="s0">!r}</span><span class="s4">&gt;&quot;</span>

    <span class="s0">def </span><span class="s1">_check_setup_finished</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">f_name</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s0">raise </span><span class="s1">NotImplementedError</span>

    <span class="s2">@</span><span class="s1">property</span>
    <span class="s0">def </span><span class="s1">static_folder</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str </span><span class="s2">| </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;The absolute path to the configured static folder. ``None`` 
        if no static folder is set. 
        &quot;&quot;&quot;</span>
        <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_static_folder </span><span class="s0">is not None</span><span class="s2">:</span>
            <span class="s0">return </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">root_path</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_static_folder</span><span class="s2">)</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s0">return None</span>

    <span class="s2">@</span><span class="s1">static_folder</span><span class="s2">.</span><span class="s1">setter</span>
    <span class="s0">def </span><span class="s1">static_folder</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">value</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s1">os</span><span class="s2">.</span><span class="s1">PathLike</span><span class="s2">[</span><span class="s1">str</span><span class="s2">] | </span><span class="s0">None</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s0">if </span><span class="s1">value </span><span class="s0">is not None</span><span class="s2">:</span>
            <span class="s1">value </span><span class="s2">= </span><span class="s1">os</span><span class="s2">.</span><span class="s1">fspath</span><span class="s2">(</span><span class="s1">value</span><span class="s2">).</span><span class="s1">rstrip</span><span class="s2">(</span><span class="s4">r&quot;\/&quot;</span><span class="s2">)</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">_static_folder </span><span class="s2">= </span><span class="s1">value</span>

    <span class="s2">@</span><span class="s1">property</span>
    <span class="s0">def </span><span class="s1">has_static_folder</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;``True`` if :attr:`static_folder` is set. 
 
        .. versionadded:: 0.5 
        &quot;&quot;&quot;</span>
        <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">static_folder </span><span class="s0">is not None</span>

    <span class="s2">@</span><span class="s1">property</span>
    <span class="s0">def </span><span class="s1">static_url_path</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; str </span><span class="s2">| </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;The URL prefix that the static route will be accessible from. 
 
        If it was not configured during init, it is derived from 
        :attr:`static_folder`. 
        &quot;&quot;&quot;</span>
        <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_static_url_path </span><span class="s0">is not None</span><span class="s2">:</span>
            <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_static_url_path</span>

        <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">static_folder </span><span class="s0">is not None</span><span class="s2">:</span>
            <span class="s1">basename </span><span class="s2">= </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">basename</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">static_folder</span><span class="s2">)</span>
            <span class="s0">return </span><span class="s4">f&quot;/</span><span class="s0">{</span><span class="s1">basename</span><span class="s0">}</span><span class="s4">&quot;</span><span class="s2">.</span><span class="s1">rstrip</span><span class="s2">(</span><span class="s4">&quot;/&quot;</span><span class="s2">)</span>

        <span class="s0">return None</span>

    <span class="s2">@</span><span class="s1">static_url_path</span><span class="s2">.</span><span class="s1">setter</span>
    <span class="s0">def </span><span class="s1">static_url_path</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">value</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None</span><span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s0">if </span><span class="s1">value </span><span class="s0">is not None</span><span class="s2">:</span>
            <span class="s1">value </span><span class="s2">= </span><span class="s1">value</span><span class="s2">.</span><span class="s1">rstrip</span><span class="s2">(</span><span class="s4">&quot;/&quot;</span><span class="s2">)</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">_static_url_path </span><span class="s2">= </span><span class="s1">value</span>

    <span class="s2">@</span><span class="s1">cached_property</span>
    <span class="s0">def </span><span class="s1">jinja_loader</span><span class="s2">(</span><span class="s1">self</span><span class="s2">) </span><span class="s1">-&gt; BaseLoader </span><span class="s2">| </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;The Jinja loader for this object's templates. By default this 
        is a class :class:`jinja2.loaders.FileSystemLoader` to 
        :attr:`template_folder` if it is set. 
 
        .. versionadded:: 0.5 
        &quot;&quot;&quot;</span>
        <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">template_folder </span><span class="s0">is not None</span><span class="s2">:</span>
            <span class="s0">return </span><span class="s1">FileSystemLoader</span><span class="s2">(</span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">root_path</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">template_folder</span><span class="s2">))</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s0">return None</span>

    <span class="s0">def </span><span class="s1">_method_route</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">method</span><span class="s2">: </span><span class="s1">str</span><span class="s2">,</span>
        <span class="s1">rule</span><span class="s2">: </span><span class="s1">str</span><span class="s2">,</span>
        <span class="s1">options</span><span class="s2">: </span><span class="s1">dict</span><span class="s2">[</span><span class="s1">str</span><span class="s2">, </span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">],</span>
    <span class="s2">) </span><span class="s1">-&gt; t</span><span class="s2">.</span><span class="s1">Callable</span><span class="s2">[[</span><span class="s1">T_route</span><span class="s2">], </span><span class="s1">T_route</span><span class="s2">]:</span>
        <span class="s0">if </span><span class="s4">&quot;methods&quot; </span><span class="s0">in </span><span class="s1">options</span><span class="s2">:</span>
            <span class="s0">raise </span><span class="s1">TypeError</span><span class="s2">(</span><span class="s4">&quot;Use the 'route' decorator to use the 'methods' argument.&quot;</span><span class="s2">)</span>

        <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">route</span><span class="s2">(</span><span class="s1">rule</span><span class="s2">, </span><span class="s1">methods</span><span class="s2">=[</span><span class="s1">method</span><span class="s2">], **</span><span class="s1">options</span><span class="s2">)</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">get</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">rule</span><span class="s2">: </span><span class="s1">str</span><span class="s2">, **</span><span class="s1">options</span><span class="s2">: </span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">) </span><span class="s1">-&gt; t</span><span class="s2">.</span><span class="s1">Callable</span><span class="s2">[[</span><span class="s1">T_route</span><span class="s2">], </span><span class="s1">T_route</span><span class="s2">]:</span>
        <span class="s5">&quot;&quot;&quot;Shortcut for :meth:`route` with ``methods=[&quot;GET&quot;]``. 
 
        .. versionadded:: 2.0 
        &quot;&quot;&quot;</span>
        <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_method_route</span><span class="s2">(</span><span class="s4">&quot;GET&quot;</span><span class="s2">, </span><span class="s1">rule</span><span class="s2">, </span><span class="s1">options</span><span class="s2">)</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">post</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">rule</span><span class="s2">: </span><span class="s1">str</span><span class="s2">, **</span><span class="s1">options</span><span class="s2">: </span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">) </span><span class="s1">-&gt; t</span><span class="s2">.</span><span class="s1">Callable</span><span class="s2">[[</span><span class="s1">T_route</span><span class="s2">], </span><span class="s1">T_route</span><span class="s2">]:</span>
        <span class="s5">&quot;&quot;&quot;Shortcut for :meth:`route` with ``methods=[&quot;POST&quot;]``. 
 
        .. versionadded:: 2.0 
        &quot;&quot;&quot;</span>
        <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_method_route</span><span class="s2">(</span><span class="s4">&quot;POST&quot;</span><span class="s2">, </span><span class="s1">rule</span><span class="s2">, </span><span class="s1">options</span><span class="s2">)</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">put</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">rule</span><span class="s2">: </span><span class="s1">str</span><span class="s2">, **</span><span class="s1">options</span><span class="s2">: </span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">) </span><span class="s1">-&gt; t</span><span class="s2">.</span><span class="s1">Callable</span><span class="s2">[[</span><span class="s1">T_route</span><span class="s2">], </span><span class="s1">T_route</span><span class="s2">]:</span>
        <span class="s5">&quot;&quot;&quot;Shortcut for :meth:`route` with ``methods=[&quot;PUT&quot;]``. 
 
        .. versionadded:: 2.0 
        &quot;&quot;&quot;</span>
        <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_method_route</span><span class="s2">(</span><span class="s4">&quot;PUT&quot;</span><span class="s2">, </span><span class="s1">rule</span><span class="s2">, </span><span class="s1">options</span><span class="s2">)</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">delete</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">rule</span><span class="s2">: </span><span class="s1">str</span><span class="s2">, **</span><span class="s1">options</span><span class="s2">: </span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">) </span><span class="s1">-&gt; t</span><span class="s2">.</span><span class="s1">Callable</span><span class="s2">[[</span><span class="s1">T_route</span><span class="s2">], </span><span class="s1">T_route</span><span class="s2">]:</span>
        <span class="s5">&quot;&quot;&quot;Shortcut for :meth:`route` with ``methods=[&quot;DELETE&quot;]``. 
 
        .. versionadded:: 2.0 
        &quot;&quot;&quot;</span>
        <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_method_route</span><span class="s2">(</span><span class="s4">&quot;DELETE&quot;</span><span class="s2">, </span><span class="s1">rule</span><span class="s2">, </span><span class="s1">options</span><span class="s2">)</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">patch</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">rule</span><span class="s2">: </span><span class="s1">str</span><span class="s2">, **</span><span class="s1">options</span><span class="s2">: </span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">) </span><span class="s1">-&gt; t</span><span class="s2">.</span><span class="s1">Callable</span><span class="s2">[[</span><span class="s1">T_route</span><span class="s2">], </span><span class="s1">T_route</span><span class="s2">]:</span>
        <span class="s5">&quot;&quot;&quot;Shortcut for :meth:`route` with ``methods=[&quot;PATCH&quot;]``. 
 
        .. versionadded:: 2.0 
        &quot;&quot;&quot;</span>
        <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_method_route</span><span class="s2">(</span><span class="s4">&quot;PATCH&quot;</span><span class="s2">, </span><span class="s1">rule</span><span class="s2">, </span><span class="s1">options</span><span class="s2">)</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">route</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">rule</span><span class="s2">: </span><span class="s1">str</span><span class="s2">, **</span><span class="s1">options</span><span class="s2">: </span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">) </span><span class="s1">-&gt; t</span><span class="s2">.</span><span class="s1">Callable</span><span class="s2">[[</span><span class="s1">T_route</span><span class="s2">], </span><span class="s1">T_route</span><span class="s2">]:</span>
        <span class="s5">&quot;&quot;&quot;Decorate a view function to register it with the given URL 
        rule and options. Calls :meth:`add_url_rule`, which has more 
        details about the implementation. 
 
        .. code-block:: python 
 
            @app.route(&quot;/&quot;) 
            def index(): 
                return &quot;Hello, World!&quot; 
 
        See :ref:`url-route-registrations`. 
 
        The endpoint name for the route defaults to the name of the view 
        function if the ``endpoint`` parameter isn't passed. 
 
        The ``methods`` parameter defaults to ``[&quot;GET&quot;]``. ``HEAD`` and 
        ``OPTIONS`` are added automatically. 
 
        :param rule: The URL rule string. 
        :param options: Extra options passed to the 
            :class:`~werkzeug.routing.Rule` object. 
        &quot;&quot;&quot;</span>

        <span class="s0">def </span><span class="s1">decorator</span><span class="s2">(</span><span class="s1">f</span><span class="s2">: </span><span class="s1">T_route</span><span class="s2">) </span><span class="s1">-&gt; T_route</span><span class="s2">:</span>
            <span class="s1">endpoint </span><span class="s2">= </span><span class="s1">options</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(</span><span class="s4">&quot;endpoint&quot;</span><span class="s2">, </span><span class="s0">None</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">add_url_rule</span><span class="s2">(</span><span class="s1">rule</span><span class="s2">, </span><span class="s1">endpoint</span><span class="s2">, </span><span class="s1">f</span><span class="s2">, **</span><span class="s1">options</span><span class="s2">)</span>
            <span class="s0">return </span><span class="s1">f</span>

        <span class="s0">return </span><span class="s1">decorator</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">add_url_rule</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">rule</span><span class="s2">: </span><span class="s1">str</span><span class="s2">,</span>
        <span class="s1">endpoint</span><span class="s2">: </span><span class="s1">str </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">view_func</span><span class="s2">: </span><span class="s1">ft</span><span class="s2">.</span><span class="s1">RouteCallable </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s1">provide_automatic_options</span><span class="s2">: </span><span class="s1">bool </span><span class="s2">| </span><span class="s0">None </span><span class="s2">= </span><span class="s0">None</span><span class="s2">,</span>
        <span class="s2">**</span><span class="s1">options</span><span class="s2">: </span><span class="s1">t</span><span class="s2">.</span><span class="s1">Any</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;Register a rule for routing incoming requests and building 
        URLs. The :meth:`route` decorator is a shortcut to call this 
        with the ``view_func`` argument. These are equivalent: 
 
        .. code-block:: python 
 
            @app.route(&quot;/&quot;) 
            def index(): 
                ... 
 
        .. code-block:: python 
 
            def index(): 
                ... 
 
            app.add_url_rule(&quot;/&quot;, view_func=index) 
 
        See :ref:`url-route-registrations`. 
 
        The endpoint name for the route defaults to the name of the view 
        function if the ``endpoint`` parameter isn't passed. An error 
        will be raised if a function has already been registered for the 
        endpoint. 
 
        The ``methods`` parameter defaults to ``[&quot;GET&quot;]``. ``HEAD`` is 
        always added automatically, and ``OPTIONS`` is added 
        automatically by default. 
 
        ``view_func`` does not necessarily need to be passed, but if the 
        rule should participate in routing an endpoint name must be 
        associated with a view function at some point with the 
        :meth:`endpoint` decorator. 
 
        .. code-block:: python 
 
            app.add_url_rule(&quot;/&quot;, endpoint=&quot;index&quot;) 
 
            @app.endpoint(&quot;index&quot;) 
            def index(): 
                ... 
 
        If ``view_func`` has a ``required_methods`` attribute, those 
        methods are added to the passed and automatic methods. If it 
        has a ``provide_automatic_methods`` attribute, it is used as the 
        default if the parameter is not passed. 
 
        :param rule: The URL rule string. 
        :param endpoint: The endpoint name to associate with the rule 
            and view function. Used when routing and building URLs. 
            Defaults to ``view_func.__name__``. 
        :param view_func: The view function to associate with the 
            endpoint name. 
        :param provide_automatic_options: Add the ``OPTIONS`` method and 
            respond to ``OPTIONS`` requests automatically. 
        :param options: Extra options passed to the 
            :class:`~werkzeug.routing.Rule` object. 
        &quot;&quot;&quot;</span>
        <span class="s0">raise </span><span class="s1">NotImplementedError</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">endpoint</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">endpoint</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; t</span><span class="s2">.</span><span class="s1">Callable</span><span class="s2">[[</span><span class="s1">F</span><span class="s2">], </span><span class="s1">F</span><span class="s2">]:</span>
        <span class="s5">&quot;&quot;&quot;Decorate a view function to register it for the given 
        endpoint. Used if a rule is added without a ``view_func`` with 
        :meth:`add_url_rule`. 
 
        .. code-block:: python 
 
            app.add_url_rule(&quot;/ex&quot;, endpoint=&quot;example&quot;) 
 
            @app.endpoint(&quot;example&quot;) 
            def example(): 
                ... 
 
        :param endpoint: The endpoint name to associate with the view 
            function. 
        &quot;&quot;&quot;</span>

        <span class="s0">def </span><span class="s1">decorator</span><span class="s2">(</span><span class="s1">f</span><span class="s2">: </span><span class="s1">F</span><span class="s2">) </span><span class="s1">-&gt; F</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">view_functions</span><span class="s2">[</span><span class="s1">endpoint</span><span class="s2">] = </span><span class="s1">f</span>
            <span class="s0">return </span><span class="s1">f</span>

        <span class="s0">return </span><span class="s1">decorator</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">before_request</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">f</span><span class="s2">: </span><span class="s1">T_before_request</span><span class="s2">) </span><span class="s1">-&gt; T_before_request</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;Register a function to run before each request. 
 
        For example, this can be used to open a database connection, or 
        to load the logged in user from the session. 
 
        .. code-block:: python 
 
            @app.before_request 
            def load_user(): 
                if &quot;user_id&quot; in session: 
                    g.user = db.session.get(session[&quot;user_id&quot;]) 
 
        The function will be called without any arguments. If it returns 
        a non-``None`` value, the value is handled as if it was the 
        return value from the view, and further request handling is 
        stopped. 
 
        This is available on both app and blueprint objects. When used on an app, this 
        executes before every request. When used on a blueprint, this executes before 
        every request that the blueprint handles. To register with a blueprint and 
        execute before every request, use :meth:`.Blueprint.before_app_request`. 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">before_request_funcs</span><span class="s2">.</span><span class="s1">setdefault</span><span class="s2">(</span><span class="s0">None</span><span class="s2">, []).</span><span class="s1">append</span><span class="s2">(</span><span class="s1">f</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">f</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">after_request</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">f</span><span class="s2">: </span><span class="s1">T_after_request</span><span class="s2">) </span><span class="s1">-&gt; T_after_request</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;Register a function to run after each request to this object. 
 
        The function is called with the response object, and must return 
        a response object. This allows the functions to modify or 
        replace the response before it is sent. 
 
        If a function raises an exception, any remaining 
        ``after_request`` functions will not be called. Therefore, this 
        should not be used for actions that must execute, such as to 
        close resources. Use :meth:`teardown_request` for that. 
 
        This is available on both app and blueprint objects. When used on an app, this 
        executes after every request. When used on a blueprint, this executes after 
        every request that the blueprint handles. To register with a blueprint and 
        execute after every request, use :meth:`.Blueprint.after_app_request`. 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">after_request_funcs</span><span class="s2">.</span><span class="s1">setdefault</span><span class="s2">(</span><span class="s0">None</span><span class="s2">, []).</span><span class="s1">append</span><span class="s2">(</span><span class="s1">f</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">f</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">teardown_request</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">f</span><span class="s2">: </span><span class="s1">T_teardown</span><span class="s2">) </span><span class="s1">-&gt; T_teardown</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;Register a function to be called when the request context is 
        popped. Typically this happens at the end of each request, but 
        contexts may be pushed manually as well during testing. 
 
        .. code-block:: python 
 
            with app.test_request_context(): 
                ... 
 
        When the ``with`` block exits (or ``ctx.pop()`` is called), the 
        teardown functions are called just before the request context is 
        made inactive. 
 
        When a teardown function was called because of an unhandled 
        exception it will be passed an error object. If an 
        :meth:`errorhandler` is registered, it will handle the exception 
        and the teardown will not receive it. 
 
        Teardown functions must avoid raising exceptions. If they 
        execute code that might fail they must surround that code with a 
        ``try``/``except`` block and log any errors. 
 
        The return values of teardown functions are ignored. 
 
        This is available on both app and blueprint objects. When used on an app, this 
        executes after every request. When used on a blueprint, this executes after 
        every request that the blueprint handles. To register with a blueprint and 
        execute after every request, use :meth:`.Blueprint.teardown_app_request`. 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">teardown_request_funcs</span><span class="s2">.</span><span class="s1">setdefault</span><span class="s2">(</span><span class="s0">None</span><span class="s2">, []).</span><span class="s1">append</span><span class="s2">(</span><span class="s1">f</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">f</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">context_processor</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">f</span><span class="s2">: </span><span class="s1">T_template_context_processor</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; T_template_context_processor</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;Registers a template context processor function. These functions run before 
        rendering a template. The keys of the returned dict are added as variables 
        available in the template. 
 
        This is available on both app and blueprint objects. When used on an app, this 
        is called for every rendered template. When used on a blueprint, this is called 
        for templates rendered from the blueprint's views. To register with a blueprint 
        and affect every template, use :meth:`.Blueprint.app_context_processor`. 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">template_context_processors</span><span class="s2">[</span><span class="s0">None</span><span class="s2">].</span><span class="s1">append</span><span class="s2">(</span><span class="s1">f</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">f</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">url_value_preprocessor</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">f</span><span class="s2">: </span><span class="s1">T_url_value_preprocessor</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; T_url_value_preprocessor</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;Register a URL value preprocessor function for all view 
        functions in the application. These functions will be called before the 
        :meth:`before_request` functions. 
 
        The function can modify the values captured from the matched url before 
        they are passed to the view. For example, this can be used to pop a 
        common language code value and place it in ``g`` rather than pass it to 
        every view. 
 
        The function is passed the endpoint name and values dict. The return 
        value is ignored. 
 
        This is available on both app and blueprint objects. When used on an app, this 
        is called for every request. When used on a blueprint, this is called for 
        requests that the blueprint handles. To register with a blueprint and affect 
        every request, use :meth:`.Blueprint.app_url_value_preprocessor`. 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">url_value_preprocessors</span><span class="s2">[</span><span class="s0">None</span><span class="s2">].</span><span class="s1">append</span><span class="s2">(</span><span class="s1">f</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">f</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">url_defaults</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">f</span><span class="s2">: </span><span class="s1">T_url_defaults</span><span class="s2">) </span><span class="s1">-&gt; T_url_defaults</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;Callback function for URL defaults for all view functions of the 
        application.  It's called with the endpoint and values and should 
        update the values passed in place. 
 
        This is available on both app and blueprint objects. When used on an app, this 
        is called for every request. When used on a blueprint, this is called for 
        requests that the blueprint handles. To register with a blueprint and affect 
        every request, use :meth:`.Blueprint.app_url_defaults`. 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">url_default_functions</span><span class="s2">[</span><span class="s0">None</span><span class="s2">].</span><span class="s1">append</span><span class="s2">(</span><span class="s1">f</span><span class="s2">)</span>
        <span class="s0">return </span><span class="s1">f</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">errorhandler</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">, </span><span class="s1">code_or_exception</span><span class="s2">: </span><span class="s1">type</span><span class="s2">[</span><span class="s1">Exception</span><span class="s2">] | </span><span class="s1">int</span>
    <span class="s2">) </span><span class="s1">-&gt; t</span><span class="s2">.</span><span class="s1">Callable</span><span class="s2">[[</span><span class="s1">T_error_handler</span><span class="s2">], </span><span class="s1">T_error_handler</span><span class="s2">]:</span>
        <span class="s5">&quot;&quot;&quot;Register a function to handle errors by code or exception class. 
 
        A decorator that is used to register a function given an 
        error code.  Example:: 
 
            @app.errorhandler(404) 
            def page_not_found(error): 
                return 'This page does not exist', 404 
 
        You can also register handlers for arbitrary exceptions:: 
 
            @app.errorhandler(DatabaseError) 
            def special_exception_handler(error): 
                return 'Database connection failed', 500 
 
        This is available on both app and blueprint objects. When used on an app, this 
        can handle errors from every request. When used on a blueprint, this can handle 
        errors from requests that the blueprint handles. To register with a blueprint 
        and affect every request, use :meth:`.Blueprint.app_errorhandler`. 
 
        .. versionadded:: 0.7 
            Use :meth:`register_error_handler` instead of modifying 
            :attr:`error_handler_spec` directly, for application wide error 
            handlers. 
 
        .. versionadded:: 0.7 
           One can now additionally also register custom exception types 
           that do not necessarily have to be a subclass of the 
           :class:`~werkzeug.exceptions.HTTPException` class. 
 
        :param code_or_exception: the code as integer for the handler, or 
                                  an arbitrary exception 
        &quot;&quot;&quot;</span>

        <span class="s0">def </span><span class="s1">decorator</span><span class="s2">(</span><span class="s1">f</span><span class="s2">: </span><span class="s1">T_error_handler</span><span class="s2">) </span><span class="s1">-&gt; T_error_handler</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">register_error_handler</span><span class="s2">(</span><span class="s1">code_or_exception</span><span class="s2">, </span><span class="s1">f</span><span class="s2">)</span>
            <span class="s0">return </span><span class="s1">f</span>

        <span class="s0">return </span><span class="s1">decorator</span>

    <span class="s2">@</span><span class="s1">setupmethod</span>
    <span class="s0">def </span><span class="s1">register_error_handler</span><span class="s2">(</span>
        <span class="s1">self</span><span class="s2">,</span>
        <span class="s1">code_or_exception</span><span class="s2">: </span><span class="s1">type</span><span class="s2">[</span><span class="s1">Exception</span><span class="s2">] | </span><span class="s1">int</span><span class="s2">,</span>
        <span class="s1">f</span><span class="s2">: </span><span class="s1">ft</span><span class="s2">.</span><span class="s1">ErrorHandlerCallable</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; </span><span class="s0">None</span><span class="s2">:</span>
        <span class="s5">&quot;&quot;&quot;Alternative error attach function to the :meth:`errorhandler` 
        decorator that is more straightforward to use for non decorator 
        usage. 
 
        .. versionadded:: 0.7 
        &quot;&quot;&quot;</span>
        <span class="s1">exc_class</span><span class="s2">, </span><span class="s1">code </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_get_exc_class_and_code</span><span class="s2">(</span><span class="s1">code_or_exception</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">error_handler_spec</span><span class="s2">[</span><span class="s0">None</span><span class="s2">][</span><span class="s1">code</span><span class="s2">][</span><span class="s1">exc_class</span><span class="s2">] = </span><span class="s1">f</span>

    <span class="s2">@</span><span class="s1">staticmethod</span>
    <span class="s0">def </span><span class="s1">_get_exc_class_and_code</span><span class="s2">(</span>
        <span class="s1">exc_class_or_code</span><span class="s2">: </span><span class="s1">type</span><span class="s2">[</span><span class="s1">Exception</span><span class="s2">] | </span><span class="s1">int</span><span class="s2">,</span>
    <span class="s2">) </span><span class="s1">-&gt; tuple</span><span class="s2">[</span><span class="s1">type</span><span class="s2">[</span><span class="s1">Exception</span><span class="s2">], </span><span class="s1">int </span><span class="s2">| </span><span class="s0">None</span><span class="s2">]:</span>
        <span class="s5">&quot;&quot;&quot;Get the exception class being handled. For HTTP status codes 
        or ``HTTPException`` subclasses, return both the exception and 
        status code. 
 
        :param exc_class_or_code: Any exception class, or an HTTP status 
            code as an integer. 
        &quot;&quot;&quot;</span>
        <span class="s1">exc_class</span><span class="s2">: </span><span class="s1">type</span><span class="s2">[</span><span class="s1">Exception</span><span class="s2">]</span>

        <span class="s0">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">exc_class_or_code</span><span class="s2">, </span><span class="s1">int</span><span class="s2">):</span>
            <span class="s0">try</span><span class="s2">:</span>
                <span class="s1">exc_class </span><span class="s2">= </span><span class="s1">default_exceptions</span><span class="s2">[</span><span class="s1">exc_class_or_code</span><span class="s2">]</span>
            <span class="s0">except </span><span class="s1">KeyError</span><span class="s2">:</span>
                <span class="s0">raise </span><span class="s1">ValueError</span><span class="s2">(</span>
                    <span class="s4">f&quot;'</span><span class="s0">{</span><span class="s1">exc_class_or_code</span><span class="s0">}</span><span class="s4">' is not a recognized HTTP&quot;</span>
                    <span class="s4">&quot; error code. Use a subclass of HTTPException with&quot;</span>
                    <span class="s4">&quot; that code instead.&quot;</span>
                <span class="s2">) </span><span class="s0">from None</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">exc_class </span><span class="s2">= </span><span class="s1">exc_class_or_code</span>

        <span class="s0">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">exc_class</span><span class="s2">, </span><span class="s1">Exception</span><span class="s2">):</span>
            <span class="s0">raise </span><span class="s1">TypeError</span><span class="s2">(</span>
                <span class="s4">f&quot;</span><span class="s0">{</span><span class="s1">exc_class</span><span class="s0">!r} </span><span class="s4">is an instance, not a class. Handlers&quot;</span>
                <span class="s4">&quot; can only be registered for Exception classes or HTTP&quot;</span>
                <span class="s4">&quot; error codes.&quot;</span>
            <span class="s2">)</span>

        <span class="s0">if not </span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">exc_class</span><span class="s2">, </span><span class="s1">Exception</span><span class="s2">):</span>
            <span class="s0">raise </span><span class="s1">ValueError</span><span class="s2">(</span>
                <span class="s4">f&quot;'</span><span class="s0">{</span><span class="s1">exc_class</span><span class="s2">.</span><span class="s1">__name__</span><span class="s0">}</span><span class="s4">' is not a subclass of Exception.&quot;</span>
                <span class="s4">&quot; Handlers can only be registered for Exception classes&quot;</span>
                <span class="s4">&quot; or HTTP error codes.&quot;</span>
            <span class="s2">)</span>

        <span class="s0">if </span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">exc_class</span><span class="s2">, </span><span class="s1">HTTPException</span><span class="s2">):</span>
            <span class="s0">return </span><span class="s1">exc_class</span><span class="s2">, </span><span class="s1">exc_class</span><span class="s2">.</span><span class="s1">code</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s0">return </span><span class="s1">exc_class</span><span class="s2">, </span><span class="s0">None</span>


<span class="s0">def </span><span class="s1">_endpoint_from_view_func</span><span class="s2">(</span><span class="s1">view_func</span><span class="s2">: </span><span class="s1">ft</span><span class="s2">.</span><span class="s1">RouteCallable</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">:</span>
    <span class="s5">&quot;&quot;&quot;Internal helper that returns the default endpoint for a given 
    function.  This always is the function name. 
    &quot;&quot;&quot;</span>
    <span class="s0">assert </span><span class="s1">view_func </span><span class="s0">is not None</span><span class="s2">, </span><span class="s4">&quot;expected view func if endpoint is not provided.&quot;</span>
    <span class="s0">return </span><span class="s1">view_func</span><span class="s2">.</span><span class="s1">__name__</span>


<span class="s0">def </span><span class="s1">_path_is_relative_to</span><span class="s2">(</span><span class="s1">path</span><span class="s2">: </span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">PurePath</span><span class="s2">, </span><span class="s1">base</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; bool</span><span class="s2">:</span>
    <span class="s3"># Path.is_relative_to doesn't exist until Python 3.9</span>
    <span class="s0">try</span><span class="s2">:</span>
        <span class="s1">path</span><span class="s2">.</span><span class="s1">relative_to</span><span class="s2">(</span><span class="s1">base</span><span class="s2">)</span>
        <span class="s0">return True</span>
    <span class="s0">except </span><span class="s1">ValueError</span><span class="s2">:</span>
        <span class="s0">return False</span>


<span class="s0">def </span><span class="s1">_find_package_path</span><span class="s2">(</span><span class="s1">import_name</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; str</span><span class="s2">:</span>
    <span class="s5">&quot;&quot;&quot;Find the path that contains the package or module.&quot;&quot;&quot;</span>
    <span class="s1">root_mod_name</span><span class="s2">, </span><span class="s1">_</span><span class="s2">, </span><span class="s1">_ </span><span class="s2">= </span><span class="s1">import_name</span><span class="s2">.</span><span class="s1">partition</span><span class="s2">(</span><span class="s4">&quot;.&quot;</span><span class="s2">)</span>

    <span class="s0">try</span><span class="s2">:</span>
        <span class="s1">root_spec </span><span class="s2">= </span><span class="s1">importlib</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">find_spec</span><span class="s2">(</span><span class="s1">root_mod_name</span><span class="s2">)</span>

        <span class="s0">if </span><span class="s1">root_spec </span><span class="s0">is None</span><span class="s2">:</span>
            <span class="s0">raise </span><span class="s1">ValueError</span><span class="s2">(</span><span class="s4">&quot;not found&quot;</span><span class="s2">)</span>
    <span class="s0">except </span><span class="s2">(</span><span class="s1">ImportError</span><span class="s2">, </span><span class="s1">ValueError</span><span class="s2">):</span>
        <span class="s3"># ImportError: the machinery told us it does not exist</span>
        <span class="s3"># ValueError:</span>
        <span class="s3">#    - the module name was invalid</span>
        <span class="s3">#    - the module name is __main__</span>
        <span class="s3">#    - we raised `ValueError` due to `root_spec` being `None`</span>
        <span class="s0">return </span><span class="s1">os</span><span class="s2">.</span><span class="s1">getcwd</span><span class="s2">()</span>

    <span class="s0">if </span><span class="s1">root_spec</span><span class="s2">.</span><span class="s1">submodule_search_locations</span><span class="s2">:</span>
        <span class="s0">if </span><span class="s1">root_spec</span><span class="s2">.</span><span class="s1">origin </span><span class="s0">is None or </span><span class="s1">root_spec</span><span class="s2">.</span><span class="s1">origin </span><span class="s2">== </span><span class="s4">&quot;namespace&quot;</span><span class="s2">:</span>
            <span class="s3"># namespace package</span>
            <span class="s1">package_spec </span><span class="s2">= </span><span class="s1">importlib</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">find_spec</span><span class="s2">(</span><span class="s1">import_name</span><span class="s2">)</span>

            <span class="s0">if </span><span class="s1">package_spec </span><span class="s0">is not None and </span><span class="s1">package_spec</span><span class="s2">.</span><span class="s1">submodule_search_locations</span><span class="s2">:</span>
                <span class="s3"># Pick the path in the namespace that contains the submodule.</span>
                <span class="s1">package_path </span><span class="s2">= </span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">Path</span><span class="s2">(</span>
                    <span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">commonpath</span><span class="s2">(</span><span class="s1">package_spec</span><span class="s2">.</span><span class="s1">submodule_search_locations</span><span class="s2">)</span>
                <span class="s2">)</span>
                <span class="s1">search_location </span><span class="s2">= </span><span class="s1">next</span><span class="s2">(</span>
                    <span class="s1">location</span>
                    <span class="s0">for </span><span class="s1">location </span><span class="s0">in </span><span class="s1">root_spec</span><span class="s2">.</span><span class="s1">submodule_search_locations</span>
                    <span class="s0">if </span><span class="s1">_path_is_relative_to</span><span class="s2">(</span><span class="s1">package_path</span><span class="s2">, </span><span class="s1">location</span><span class="s2">)</span>
                <span class="s2">)</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s3"># Pick the first path.</span>
                <span class="s1">search_location </span><span class="s2">= </span><span class="s1">root_spec</span><span class="s2">.</span><span class="s1">submodule_search_locations</span><span class="s2">[</span><span class="s6">0</span><span class="s2">]</span>

            <span class="s0">return </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">dirname</span><span class="s2">(</span><span class="s1">search_location</span><span class="s2">)</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s3"># package with __init__.py</span>
            <span class="s0">return </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">dirname</span><span class="s2">(</span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">dirname</span><span class="s2">(</span><span class="s1">root_spec</span><span class="s2">.</span><span class="s1">origin</span><span class="s2">))</span>
    <span class="s0">else</span><span class="s2">:</span>
        <span class="s3"># module</span>
        <span class="s0">return </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">dirname</span><span class="s2">(</span><span class="s1">root_spec</span><span class="s2">.</span><span class="s1">origin</span><span class="s2">)  </span><span class="s3"># type: ignore[type-var, return-value]</span>


<span class="s0">def </span><span class="s1">find_package</span><span class="s2">(</span><span class="s1">import_name</span><span class="s2">: </span><span class="s1">str</span><span class="s2">) </span><span class="s1">-&gt; tuple</span><span class="s2">[</span><span class="s1">str </span><span class="s2">| </span><span class="s0">None</span><span class="s2">, </span><span class="s1">str</span><span class="s2">]:</span>
    <span class="s5">&quot;&quot;&quot;Find the prefix that a package is installed under, and the path 
    that it would be imported from. 
 
    The prefix is the directory containing the standard directory 
    hierarchy (lib, bin, etc.). If the package is not installed to the 
    system (:attr:`sys.prefix`) or a virtualenv (``site-packages``), 
    ``None`` is returned. 
 
    The path is the entry in :attr:`sys.path` that contains the package 
    for import. If the package is not installed, it's assumed that the 
    package was imported from the current working directory. 
    &quot;&quot;&quot;</span>
    <span class="s1">package_path </span><span class="s2">= </span><span class="s1">_find_package_path</span><span class="s2">(</span><span class="s1">import_name</span><span class="s2">)</span>
    <span class="s1">py_prefix </span><span class="s2">= </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">abspath</span><span class="s2">(</span><span class="s1">sys</span><span class="s2">.</span><span class="s1">prefix</span><span class="s2">)</span>

    <span class="s3"># installed to the system</span>
    <span class="s0">if </span><span class="s1">_path_is_relative_to</span><span class="s2">(</span><span class="s1">pathlib</span><span class="s2">.</span><span class="s1">PurePath</span><span class="s2">(</span><span class="s1">package_path</span><span class="s2">), </span><span class="s1">py_prefix</span><span class="s2">):</span>
        <span class="s0">return </span><span class="s1">py_prefix</span><span class="s2">, </span><span class="s1">package_path</span>

    <span class="s1">site_parent</span><span class="s2">, </span><span class="s1">site_folder </span><span class="s2">= </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s1">package_path</span><span class="s2">)</span>

    <span class="s3"># installed to a virtualenv</span>
    <span class="s0">if </span><span class="s1">site_folder</span><span class="s2">.</span><span class="s1">lower</span><span class="s2">() == </span><span class="s4">&quot;site-packages&quot;</span><span class="s2">:</span>
        <span class="s1">parent</span><span class="s2">, </span><span class="s1">folder </span><span class="s2">= </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s1">site_parent</span><span class="s2">)</span>

        <span class="s3"># Windows (prefix/lib/site-packages)</span>
        <span class="s0">if </span><span class="s1">folder</span><span class="s2">.</span><span class="s1">lower</span><span class="s2">() == </span><span class="s4">&quot;lib&quot;</span><span class="s2">:</span>
            <span class="s0">return </span><span class="s1">parent</span><span class="s2">, </span><span class="s1">package_path</span>

        <span class="s3"># Unix (prefix/lib/pythonX.Y/site-packages)</span>
        <span class="s0">if </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">basename</span><span class="s2">(</span><span class="s1">parent</span><span class="s2">).</span><span class="s1">lower</span><span class="s2">() == </span><span class="s4">&quot;lib&quot;</span><span class="s2">:</span>
            <span class="s0">return </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">dirname</span><span class="s2">(</span><span class="s1">parent</span><span class="s2">), </span><span class="s1">package_path</span>

        <span class="s3"># something else (prefix/site-packages)</span>
        <span class="s0">return </span><span class="s1">site_parent</span><span class="s2">, </span><span class="s1">package_path</span>

    <span class="s3"># not installed</span>
    <span class="s0">return None</span><span class="s2">, </span><span class="s1">package_path</span>
</pre>
</body>
</html>